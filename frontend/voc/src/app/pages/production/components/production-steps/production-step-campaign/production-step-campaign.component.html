<div [formGroup]="form" class="flex flex-column gap-3">
    <div formGroupName="campaignDetail" class="flex flex-column gap-3">
        <div class="formgrid grid">
            <div class="col-12 md:col-6">
                <p-floatlabel variant="in">
                    <input pInputText formControlName="budget" class="w-full" />
                    <label>Presupuesto</label>
                </p-floatlabel>
            </div>
            <div class="col-12 md:col-6">
                <p-floatlabel variant="in">
                    <input pInputText formControlName="brand" class="w-full" />
                    <label>Marca</label>
                </p-floatlabel>
            </div>
        </div>

        <p-floatlabel variant="in">
            <input pInputText formControlName="productService" class="w-full" />
            <label>Nombre del Producto / Servicio</label>
        </p-floatlabel>

        <p-floatlabel variant="in">
            <p-select formControlName="objectiveId" [options]="campaignObjectives" optionLabel="name" optionValue="id"
                [style]="{'width':'100%'}" appendTo="body"></p-select>
            <label>Objetivo de la Campa√±a</label>
        </p-floatlabel>

        <div class="flex flex-column gap-2 mt-3">
            <div class="flex justify-content-between align-items-center">
                <label class="font-bold">Productos y Cantidades</label>
                <button pButton icon="pi pi-plus" label="Agregar Producto" class="p-button-sm p-button-outlined"
                    (click)="onAddProduct()"></button>
            </div>

            <div formArrayName="campaignProducts" class="flex flex-column gap-2">
                <div *ngFor="let product of campaignProducts.controls; let i = index" [formGroupName]="i"
                    class="flex gap-2 align-items-center">
                    <div class="flex-1">
                        <p-floatlabel variant="in">
                            <p-select formControlName="productId" [options]="products" optionLabel="name"
                                optionValue="id" [style]="{'width':'100%'}" appendTo="body"></p-select>
                            <label>Producto</label>
                        </p-floatlabel>
                    </div>
                    <div class="w-8rem">
                        <p-floatlabel variant="in">
                            <input pInputText formControlName="quantity" class="w-full" />
                            <label>Cantidad</label>
                        </p-floatlabel>
                    </div>
                    <button pButton icon="pi pi-trash" class="p-button-danger p-button-text"
                        (click)="onRemoveProduct(i)"></button>
                </div>
            </div>
        </div>
    </div>
</div>